# AI Content Studio æé†’ç³»ç»Ÿé…ç½®æŒ‡å—

## æ¦‚è§ˆ

AI Content Studio ä¼šåœ¨æ£€æµ‹åˆ°å†…å®¹æ–°é²œåº¦é—®é¢˜æ—¶ï¼Œé€šè¿‡ **4 ç§æ–¹å¼** ä¸»åŠ¨æé†’ä½ ï¼š

1. âœ… **æ§åˆ¶å°è¾“å‡º**ï¼ˆå¸¦é¢œè‰²æ ¼å¼ï¼‰- å·²å¯ç”¨
2. âœ… **æ—¥å¿—æ–‡ä»¶**ï¼ˆ`data/alerts.log`ï¼‰- å·²å¯ç”¨
3. âœ… **JSON æ–‡ä»¶**ï¼ˆ`data/latest_alert.json`ï¼‰- å·²å¯ç”¨
4. âš ï¸ **é£ä¹¦/Lark é€šçŸ¥**ï¼ˆéœ€è¦é…ç½®ï¼‰

---

## æé†’è§¦å‘æ¡ä»¶

### è‡ªåŠ¨æ£€æŸ¥ï¼ˆæ¯ç”Ÿæˆ 20 æ¡æ¨æ–‡ï¼‰

ç³»ç»Ÿä¼šè‡ªåŠ¨æ£€æŸ¥ä»¥ä¸‹æŒ‡æ ‡ï¼š

| æŒ‡æ ‡ | é˜ˆå€¼ | è§¦å‘æé†’ |
|-----|------|---------|
| æ–°é²œåº¦å¾—åˆ† | < 0.6 | âš ï¸ ä¸­ç­‰/é«˜ä¸¥é‡åº¦ |
| å®Œå…¨é‡å¤ç‡ | > 10% | ğŸš¨ æŠ¥è­¦ |
| ç›¸ä¼¼é‡å¤ç‡ | > 25% | âš ï¸ æŠ¥è­¦ |
| çŸ­è¯­é‡å¤ç‡ | > 40% | âš ï¸ æŠ¥è­¦ |
| è·ä¸Šæ¬¡è®­ç»ƒ | > 30 å¤© | ğŸ“… æé†’ |

### ä¸¥é‡ç¨‹åº¦åˆ†çº§

| æ–°é²œåº¦å¾—åˆ† | ä¸¥é‡ç¨‹åº¦ | å›¾æ ‡ | è¡ŒåŠ¨ |
|-----------|---------|------|------|
| < 0.35 | HIGH ğŸš¨ | çº¢è‰² | ç«‹å³è¡¥å…… 10+ æ ·æœ¬ |
| 0.35 - 0.50 | MEDIUM âš ï¸ | æ©™è‰² | 1å‘¨å†…è¡¥å…… 5-8 æ ·æœ¬ |
| 0.50 - 0.70 | LOW ğŸ“… | ç°è‰² | 2å‘¨å†…è¡¥å…… 3-5 æ ·æœ¬ |
| > 0.70 | æ­£å¸¸ âœ… | ç»¿è‰² | ç»§ç»­è§‚å¯Ÿ |

---

## æé†’æ–¹å¼è¯¦è§£

### 1. æ§åˆ¶å°è¾“å‡ºï¼ˆè‡ªåŠ¨ï¼‰

ç”Ÿæˆæ¨æ–‡æ—¶ï¼Œæ¯ 20 æ¡è‡ªåŠ¨æ£€æŸ¥å¹¶è¾“å‡ºï¼š

```
======================================================================
ğŸš¨ ã€AI Content Studio æé†’ã€‘ ğŸš¨
======================================================================
æ—¶é—´: 2025-12-29T23:13:10
ç±»å‹: content_freshness_low
ä¸¥é‡ç¨‹åº¦: HIGH

ğŸ“Š **GM å†…å®¹æ–°é²œåº¦æŠ¥å‘Š**
å¾—åˆ†: **0.35 / 1.00**

âš ï¸ **æ£€æµ‹åˆ°çš„é—®é¢˜**:
  - ğŸš¨ å®Œå…¨é‡å¤ç‡è¿‡é«˜: 18.0% (é˜ˆå€¼: 10%)
  - âš ï¸ çŸ­è¯­é‡å¤ç‡è¿‡é«˜: 45.0% (é˜ˆå€¼: 40%)

ğŸ’¡ **å»ºè®®è¡ŒåŠ¨**:
  1. âš ï¸ ç´§æ€¥ï¼šéœ€è¦ç«‹å³è¡¥å……æ–°è®­ç»ƒç´ æï¼
  2. é«˜é¢‘çŸ­è¯­: from the trenches (12æ¬¡), neural nets (8æ¬¡)

ğŸ”§ **å¿«é€Ÿæ“ä½œ**:
# æŸ¥çœ‹è¯¦æƒ…
python3 manage_training.py check --type gm

# ç”Ÿæˆè®­ç»ƒæ¨¡æ¿
python3 manage_training.py template --type gm --output new.json
======================================================================
```

### 2. æ—¥å¿—æ–‡ä»¶ï¼ˆè‡ªåŠ¨ï¼‰

æ‰€æœ‰æé†’ä¼šè¿½åŠ åˆ° `data/alerts.log`ï¼š

```json
{"timestamp": "2025-12-29T23:13:10", "type": "content_freshness_low", "severity": "HIGH", ...}
{"timestamp": "2025-12-30T10:25:43", "type": "content_freshness_low", "severity": "MEDIUM", ...}
```

**æŸ¥çœ‹æ—¥å¿—ï¼š**
```bash
tail -f data/alerts.log
cat data/alerts.log | jq .
```

### 3. JSON æ–‡ä»¶ï¼ˆè‡ªåŠ¨ï¼‰

æœ€æ–°æé†’å†™å…¥ `data/latest_alert.json`ï¼Œæ–¹ä¾¿å…¶ä»–ç¨‹åºè¯»å–ï¼š

```bash
cat data/latest_alert.json | jq .
```

### 4. é£ä¹¦/Lark é€šçŸ¥ï¼ˆéœ€é…ç½®ï¼‰

é…ç½®åï¼Œæé†’ä¼šå‘é€åˆ°é£ä¹¦ç¾¤èŠï¼š

<img src="https://example.com/lark-notification.png" alt="é£ä¹¦é€šçŸ¥ç¤ºä¾‹" width="400">

**é…ç½®æ­¥éª¤è§ä¸‹æ–¹ â¬‡ï¸**

---

## é…ç½®é£ä¹¦/Lark Webhook

### Step 1: åˆ›å»ºé£ä¹¦æœºå™¨äºº

1. æ‰“å¼€é£ä¹¦ï¼Œè¿›å…¥ç›®æ ‡ç¾¤èŠ
2. ç‚¹å‡»å³ä¸Šè§’ `...` â†’ `è®¾ç½®` â†’ `ç¾¤æœºå™¨äºº`
3. ç‚¹å‡» `æ·»åŠ æœºå™¨äºº` â†’ `è‡ªå®šä¹‰æœºå™¨äºº`
4. å¡«å†™æœºå™¨äººåç§°ï¼š`AI Content Studio å†…å®¹ç›‘æ§`
5. å¤åˆ¶ **Webhook åœ°å€**

### Step 2: é…ç½®åˆ° AI Content Studio

ç¼–è¾‘ `src/core/config.py`ï¼Œæ·»åŠ ï¼š

```python
class Config:
    # ... å…¶ä»–é…ç½® ...

    # é£ä¹¦ Webhook
    LARK_WEBHOOK_URL = 'https://open.feishu.cn/open-apis/bot/v2/hook/your-webhook-key'
```

### Step 3: æµ‹è¯•

è¿è¡Œæµ‹è¯•è„šæœ¬ï¼š

```bash
python3 test_alert_system.py --scenario high
```

å¦‚æœé…ç½®æ­£ç¡®ï¼Œä½ ä¼šåœ¨é£ä¹¦ç¾¤æ”¶åˆ°é€šçŸ¥ï¼

---

## é«˜çº§é…ç½®

### è°ƒæ•´æ£€æŸ¥é¢‘ç‡

é»˜è®¤æ¯ 20 æ¡æ¨æ–‡æ£€æŸ¥ä¸€æ¬¡ï¼Œå¯ä»¥ä¿®æ”¹ï¼š

ç¼–è¾‘ `src/intelligence/claude_client.py` ç¬¬ 331 è¡Œï¼š

```python
# æ¯ 20 æ¡æ£€æŸ¥ä¸€æ¬¡æ–°é²œåº¦
alert = self.freshness_monitor.auto_check_and_alert(
    content_type='gm',
    check_interval=20  # æ”¹æˆ 10 å°±æ˜¯æ¯ 10 æ¡æ£€æŸ¥
)
```

### è°ƒæ•´æŠ¥è­¦é˜ˆå€¼

ç¼–è¾‘ `src/intelligence/content_freshness_monitor.py` ç¬¬ 27-33 è¡Œï¼š

```python
self.THRESHOLDS = {
    'exact_duplicate_rate': 0.10,      # å®Œå…¨é‡å¤ç‡é˜ˆå€¼
    'similar_duplicate_rate': 0.25,    # ç›¸ä¼¼é‡å¤ç‡é˜ˆå€¼
    'phrase_reuse_rate': 0.40,         # çŸ­è¯­é‡å¤ç‡é˜ˆå€¼
    'days_since_training': 30,         # è®­ç»ƒæ–°é²œåº¦å¤©æ•°
    'content_staleness_score': 0.6     # æ–°é²œåº¦å¾—åˆ†é˜ˆå€¼
}
```

### è‡ªå®šä¹‰ Lark é€šçŸ¥å†…å®¹

ç¼–è¾‘ `src/notifications/alert_system.py` çš„ `_send_to_lark()` æ–¹æ³•ã€‚

---

## ä½¿ç”¨ç¤ºä¾‹

### åœºæ™¯ 1: å®æ—¶è¿è¡Œæ—¶çœ‹åˆ°æé†’

```bash
# è¿è¡Œ AI Content Studio ç”Ÿæˆæ¨æ–‡
python3 main.py

# æ¯ç”Ÿæˆ 20 æ¡ï¼Œè‡ªåŠ¨æ£€æŸ¥
# å¦‚æœæ–°é²œåº¦ < 0.6ï¼Œç«‹å³çœ‹åˆ°æ§åˆ¶å°æé†’
```

### åœºæ™¯ 2: æŸ¥çœ‹å†å²æé†’

```bash
# æŸ¥çœ‹æ‰€æœ‰æé†’æ—¥å¿—
cat data/alerts.log | jq .

# æŸ¥çœ‹æœ€æ–°æé†’
cat data/latest_alert.json | jq .

# æå–é«˜ä¸¥é‡åº¦æé†’
cat data/alerts.log | jq 'select(.severity == "HIGH")'
```

### åœºæ™¯ 3: å®šæ—¶æ£€æŸ¥ï¼ˆCronï¼‰

è®¾ç½®æ¯å¤©æ£€æŸ¥ä¸€æ¬¡ï¼š

```bash
# ç¼–è¾‘ crontab
crontab -e

# æ·»åŠ ï¼ˆæ¯å¤©æ—©ä¸Š 9 ç‚¹æ£€æŸ¥ï¼‰
0 9 * * * cd /path/to/ai-content-studio && python3 manage_training.py check --type gm
```

---

## æé†’å†…å®¹è¯¦è§£

æ¯æ¡æé†’åŒ…å«ï¼š

### 1. åŸºæœ¬ä¿¡æ¯
- **æ—¶é—´æˆ³** - æé†’å‘ç”Ÿæ—¶é—´
- **ç±»å‹** - `content_freshness_low`
- **ä¸¥é‡ç¨‹åº¦** - `HIGH` / `MEDIUM` / `LOW`

### 2. æ–°é²œåº¦æŠ¥å‘Š
- **å¾—åˆ†** - 0-1 çš„ç»¼åˆè¯„åˆ†
- **é—®é¢˜åˆ—è¡¨** - å…·ä½“å“ªäº›æŒ‡æ ‡è¶…æ ‡
- **ç»Ÿè®¡æ•°æ®** - å„é¡¹é‡å¤ç‡ç™¾åˆ†æ¯”

### 3. å»ºè®®è¡ŒåŠ¨
- é’ˆå¯¹å½“å‰é—®é¢˜çš„å…·ä½“å»ºè®®
- ä¼˜å…ˆçº§æ’åºçš„è¡ŒåŠ¨æ¸…å•
- é«˜é¢‘çŸ­è¯­åˆ—è¡¨ï¼ˆå¦‚æœæœ‰é‡å¤ï¼‰

### 4. å¿«é€Ÿæ“ä½œ
- æŸ¥çœ‹è¯¦æƒ…çš„å‘½ä»¤
- ç”Ÿæˆè®­ç»ƒæ¨¡æ¿çš„å‘½ä»¤
- ä¸€é”®æ‰§è¡Œçš„ bash è„šæœ¬

---

## æ•…éšœæ’æŸ¥

### Q: æ²¡æœ‰æ”¶åˆ°é£ä¹¦é€šçŸ¥

**æ£€æŸ¥æ¸…å•ï¼š**
1. âœ… `Config.LARK_WEBHOOK_URL` æ˜¯å¦é…ç½®ï¼Ÿ
2. âœ… Webhook URL æ˜¯å¦æ­£ç¡®ï¼Ÿ
3. âœ… æœºå™¨äººæ˜¯å¦è¢«ç§»å‡ºç¾¤èŠï¼Ÿ
4. âœ… æŸ¥çœ‹æ—¥å¿— `data/alerts.log` æ˜¯å¦æœ‰è®°å½•ï¼Ÿ

**æµ‹è¯• Webhookï¼š**
```bash
curl -X POST 'YOUR_WEBHOOK_URL' \
  -H 'Content-Type: application/json' \
  -d '{"msg_type":"text","content":{"text":"æµ‹è¯•æ¶ˆæ¯"}}'
```

### Q: æé†’å¤ªé¢‘ç¹

è°ƒé«˜é˜ˆå€¼æˆ–æ£€æŸ¥é—´éš”ï¼š
```python
# æé«˜é˜ˆå€¼ï¼ˆä¸å®¹æ˜“è§¦å‘ï¼‰
'content_staleness_score': 0.5  # æ”¹æˆ 0.5

# å‡å°‘æ£€æŸ¥é¢‘ç‡
check_interval=40  # æ”¹æˆæ¯ 40 æ¡æ£€æŸ¥ä¸€æ¬¡
```

### Q: æé†’ä¸å¤ŸåŠæ—¶

é™ä½é˜ˆå€¼æˆ–å¢åŠ æ£€æŸ¥é¢‘ç‡ï¼š
```python
# é™ä½é˜ˆå€¼ï¼ˆå®¹æ˜“è§¦å‘ï¼‰
'content_staleness_score': 0.7  # æ”¹æˆ 0.7

# å¢åŠ æ£€æŸ¥é¢‘ç‡
check_interval=10  # æ”¹æˆæ¯ 10 æ¡æ£€æŸ¥ä¸€æ¬¡
```

---

## æé†’æµç¨‹å›¾

```
ç”Ÿæˆç¬¬ 1-19 æ¡æ¨æ–‡
        â†“
ç”Ÿæˆç¬¬ 20 æ¡æ¨æ–‡ â† è§¦å‘æ£€æŸ¥
        â†“
è®¡ç®—æ–°é²œåº¦å¾—åˆ†
        â†“
    â”Œâ”€â”€â”€â”´â”€â”€â”€â”
    â†“       â†“
å¾—åˆ† â‰¥ 0.6  å¾—åˆ† < 0.6
    â†“       â†“
 æ— æé†’    è§¦å‘æé†’
           â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”
    â†“      â†“      â†“
 æ§åˆ¶å°   æ—¥å¿—   é£ä¹¦
  è¾“å‡º    æ–‡ä»¶   é€šçŸ¥
    â†“      â†“      â†“
    â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜
           â†“
     ä½ æ”¶åˆ°é€šçŸ¥ ğŸ””
           â†“
  ä½¿ç”¨ manage_training.py
    æ·»åŠ æ–°è®­ç»ƒæ ·æœ¬
           â†“
     æ–°é²œåº¦æ¢å¤ âœ…
```

---

## æ€»ç»“

**4 ç§æé†’æ–¹å¼ï¼š**
1. âœ… æ§åˆ¶å°è¾“å‡ºï¼ˆå®æ—¶ï¼‰
2. âœ… æ—¥å¿—æ–‡ä»¶ï¼ˆæŒä¹…åŒ–ï¼‰
3. âœ… JSON æ–‡ä»¶ï¼ˆç¨‹åºè¯»å–ï¼‰
4. âš ï¸ é£ä¹¦é€šçŸ¥ï¼ˆéœ€é…ç½® Webhookï¼‰

**æ ¸å¿ƒä¼˜åŠ¿ï¼š**
- ğŸ” è‡ªåŠ¨æ£€æµ‹ï¼ˆä¸éœ€è¦æ‰‹åŠ¨æŸ¥çœ‹ï¼‰
- ğŸ“Š é‡åŒ–æŒ‡æ ‡ï¼ˆçŸ¥é“å…·ä½“é—®é¢˜ï¼‰
- ğŸ’¡ å…·ä½“å»ºè®®ï¼ˆçŸ¥é“æ€ä¹ˆè§£å†³ï¼‰
- ğŸ”§ å¿«é€Ÿæ“ä½œï¼ˆä¸€é”®ç”Ÿæˆæ¨¡æ¿ï¼‰

**é…ç½®ä¸€æ¬¡ï¼Œç»ˆèº«å—ç›Šï¼** ğŸ‰
